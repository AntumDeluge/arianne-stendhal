<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stendhal: marauroad Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../styles.css" rel="stylesheet" type="text/css" />
<link rel="icon" type="image/x-icon" href="../../favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../StendhalIcon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Stendhal<span id="projectnumber">&#160;1.38.5</span>
   </div>
   <div id="projectbrief">A fun, friendly, &amp; free multiplayer online adventure game.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d4/d9a/namespacemarauroa.html">marauroa</a></li><li class="navelem"><a class="el" href="../../d3/db4/namespacemarauroa_1_1server.html">server</a></li><li class="navelem"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html">marauroad</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="../../dc/dc9/classmarauroa_1_1server_1_1marauroad-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">marauroad Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Inherits Thread.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5ff3180894a20744e4395eda990e996d"><td class="memItemLeft" align="right" valign="top"><a id="a5ff3180894a20744e4395eda990e996d" name="a5ff3180894a20744e4395eda990e996d"></a>
synchronized void&#160;</td><td class="memItemRight" valign="bottom"><b>run</b> ()</td></tr>
<tr class="separator:a5ff3180894a20744e4395eda990e996d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fb63036e38fc7589c774e6ada370300"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html#a8fb63036e38fc7589c774e6ada370300">init</a> (String[] args)</td></tr>
<tr class="separator:a8fb63036e38fc7589c774e6ada370300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0655b01b8ee3018e23fa7fdeea9f958"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/dde/interfacemarauroa_1_1server_1_1net_1_1INetworkServerManager.html">INetworkServerManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html#ad0655b01b8ee3018e23fa7fdeea9f958">getNetMan</a> ()</td></tr>
<tr class="separator:ad0655b01b8ee3018e23fa7fdeea9f958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a2a8c6b798c1c67371d59920b36026e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d4c/classmarauroa_1_1server_1_1game_1_1rp_1_1RPServerManager.html">RPServerManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html#a8a2a8c6b798c1c67371d59920b36026e">getRPServerManager</a> ()</td></tr>
<tr class="separator:a8a2a8c6b798c1c67371d59920b36026e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dfe1abe0d1eb3ddc1ca081de98b5342"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html#a6dfe1abe0d1eb3ddc1ca081de98b5342">finish</a> ()</td></tr>
<tr class="separator:a6dfe1abe0d1eb3ddc1ca081de98b5342"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8b260eecbaabcef8473fd87ada040682"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html#a8b260eecbaabcef8473fd87ada040682">main</a> (String[] args)</td></tr>
<tr class="separator:a8b260eecbaabcef8473fd87ada040682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27ca0d541f40ef3170d6b394ce55ebb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html">marauroad</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html#aa27ca0d541f40ef3170d6b394ce55ebb">getMarauroa</a> ()</td></tr>
<tr class="separator:aa27ca0d541f40ef3170d6b394ce55ebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ae9b2530c15d407b61569ff8f1133124a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html#ae9b2530c15d407b61569ff8f1133124a">marauroad</a> ()</td></tr>
<tr class="separator:ae9b2530c15d407b61569ff8f1133124a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The launcher of the whole Marauroa Server.<br  />
 Marauroa is an arianne server application with an TCP transport.<br  />
 Marauroa works by loading core class from your game server. </p>
<p >Marauroa server is and it is built using threads. marauroad has the following set of threads: </p><ul>
<li>
1 thread to receive data from clients </li>
<li>
1 thread to send data to clients </li>
<li>
1 thread to handle the data into server actions </li>
<li>
1 thread to handle RPG itself. </li>
</ul>
<p >To denote the active behavior of the thread classes their names include the word Manager.<br  />
 So marauroad has: </p><ul>
<li>
NetworkManager </li>
<li>
GameManager </li>
<li>
RPManager </li>
</ul>
<p >NetworkManager is the active thread that handles messages that come from the clients and converts them from a stream of bytes to a real Message object. See the Message Types document to understand what each message is for.<br  />
 The pseudo code behind NetworkManager is:</p>
<pre>
  forever
  {
  Read stream from network
  Convert to a Message
  store in our queue
  }
</pre><p >One level (conceptually) over NetworkManager is the GameManager, this is the part of the server that handles everything so that we can make the server work. Its main task is to process messages from clients and modify the state on the server to reflect the reply to that action, mainly related to: </p><ul>
<li>
Login </li>
<li>
Logout </li>
<li>
ChooseCharacter </li>
<li>
Actions </li>
<li>
Transfer Content </li>
</ul>
<p >See GameManager for a deeper understanding about what it does exactly.<br  />
 The hardest part of the Manager is to consider all the special cases and all the exceptions that can happen. The main pseudo code of the GameManager, if we skip exceptions, is:</p>
<pre>
  forever
  {
  Wait for Message to be available

  if(Message is Login)
  {
  check player.
  ask for character
  }

  if(Message is Choose Character)
  {
  check character
  add to game
  }

  if(Message is Action)
  {
  add action to game
  }

  if(Message is Transfer Request ACK)
  {
  send client the content requested
  }

  if(Message is Logout)
  {
  remove from game
  }
  }
</pre><p >And finally RPManager is the active thread that keeps executing actions.<br  />
 Marauroa is, as you know, turn based, so actions when received are queued for the next turn, and when that turn is reached all the actions pending on that turn are executed. </p>
<p >The idea in RPManager is to split up complexity as much as possible: we have 2 entities to help it: Scheduler and RuleManager.</p>
<pre>
  forever
  {
  for each action scheduled for this turn
  {
  run action in RuleManager
  }

  Send Perceptions

  wait until turn is completed
  next turn
  }
</pre><p >Scheduler handles the actions as they are sent by the GameManager.<br  />
 RuleManager is a class that encapsulates all the implementation related to rules. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae9b2530c15d407b61569ff8f1133124a" name="ae9b2530c15d407b61569ff8f1133124a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9b2530c15d407b61569ff8f1133124a">&#9670;&nbsp;</a></span>marauroad()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html">marauroad</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Constructor </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6dfe1abe0d1eb3ddc1ca081de98b5342" name="a6dfe1abe0d1eb3ddc1ca081de98b5342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dfe1abe0d1eb3ddc1ca081de98b5342">&#9670;&nbsp;</a></span>finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void finish </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >shuts down Marauroa </p>

</div>
</div>
<a id="aa27ca0d541f40ef3170d6b394ce55ebb" name="aa27ca0d541f40ef3170d6b394ce55ebb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27ca0d541f40ef3170d6b394ce55ebb">&#9670;&nbsp;</a></span>getMarauroa()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d5/d77/classmarauroa_1_1server_1_1marauroad.html">marauroad</a> getMarauroa </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >returns the marauroad object</p>
<dl class="section return"><dt>Returns</dt><dd>marauroad </dd></dl>

</div>
</div>
<a id="ad0655b01b8ee3018e23fa7fdeea9f958" name="ad0655b01b8ee3018e23fa7fdeea9f958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0655b01b8ee3018e23fa7fdeea9f958">&#9670;&nbsp;</a></span>getNetMan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/dde/interfacemarauroa_1_1server_1_1net_1_1INetworkServerManager.html">INetworkServerManager</a> getNetMan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >gets the network server manager</p>
<dl class="section return"><dt>Returns</dt><dd>INetworkServerManager </dd></dl>

</div>
</div>
<a id="a8a2a8c6b798c1c67371d59920b36026e" name="a8a2a8c6b798c1c67371d59920b36026e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a2a8c6b798c1c67371d59920b36026e">&#9670;&nbsp;</a></span>getRPServerManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d4c/classmarauroa_1_1server_1_1game_1_1rp_1_1RPServerManager.html">RPServerManager</a> getRPServerManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >gets the RPServerManager</p>
<dl class="section return"><dt>Returns</dt><dd>RPServerManager </dd></dl>

</div>
</div>
<a id="a8fb63036e38fc7589c774e6ada370300" name="a8fb63036e38fc7589c774e6ada370300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fb63036e38fc7589c774e6ada370300">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean init </td>
          <td>(</td>
          <td class="paramtype">String[]&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initializes the game. Returns true when all is OK, else false (this may terminate the server).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>command line arguments </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true, in case the startup was successful, false otherwise </dd></dl>

</div>
</div>
<a id="a8b260eecbaabcef8473fd87ada040682" name="a8b260eecbaabcef8473fd87ada040682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b260eecbaabcef8473fd87ada040682">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void main </td>
          <td>(</td>
          <td class="paramtype">String[]&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Entry point</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>command line arguments </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/Jordan/Development/Arianne/marauroa/src/marauroa/server/marauroad.java</li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
